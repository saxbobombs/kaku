(function(e){function o(o){for(var n,a,c=o[0],s=o[1],l=o[2],u=0,f=[];u<c.length;u++)a=c[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(o);while(f.length)f.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var e,o=0;o<i.length;o++){for(var t=i[o],n=!0,c=1;c<t.length;c++){var s=t[c];0!==r[s]&&(n=!1)}n&&(i.splice(o--,1),e=a(a.s=t[0]))}return e}var n={},r={app:0},i=[];function a(o){if(n[o])return n[o].exports;var t=n[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=n,a.d=function(e,o,t){a.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,o){if(1&o&&(e=a(e)),8&o)return e;if(4&o&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var n in e)a.d(t,n,function(o){return e[o]}.bind(null,n));return t},a.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(o,"a",o),o},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},a.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=o,c=c.slice();for(var l=0;l<c.length;l++)o(c[l]);var d=s;i.push([0,"chunk-vendors"]),t()})({0:function(e,o,t){e.exports=t("56d7")},"034f":function(e,o,t){"use strict";t("85ec")},"56d7":function(e,o,t){"use strict";t.r(o);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("2b0e"),r=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"header"}},[t("b-container",[t("h1",[e._v("kaku")])])],1),t("b-container",[t("b-toast",{ref:"browser-comp",staticClass:"browser-comp",attrs:{static:"",title:"browser compatibility","no-auto-hide":""}},[e._v(" please use a modern browser to avoid unexpected behavior. ")]),t("div",{staticClass:"control-container"},[t("Controls")],1),t("div",{staticClass:"canvas-container"},[t("DrawingPad")],1)],1)],1)},i=[],a=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("ul",{staticClass:"control-container"},[t("li",[t("b-form-input",{staticClass:"griditemsize",attrs:{type:"number",min:"1",max:"20"},on:{change:e.changeGridItemSize},model:{value:e.gridItemSize,callback:function(o){e.gridItemSize=o},expression:"gridItemSize"}})],1),t("li",[t("b-form-radio-group",{staticClass:"control-button grid-size-container",attrs:{buttons:""},on:{change:e.chooseGridSize},model:{value:e.gridSize,callback:function(o){e.gridSize=o},expression:"gridSize"}},[t("i",{staticClass:"group-label fas fa-th"}),e._l(e.gridSizes,(function(o){return[t("b-form-radio",{key:o.index,attrs:{value:o.value}},[e._v(" "+e._s(o.name)+" ")])]}))],2)],1),t("li",[t("b-form-checkbox-group",{staticClass:"control-button grid-size-container",attrs:{buttons:""}},[t("b-form-checkbox",{attrs:{value:"1","unchecked-value":"0"},on:{change:e.changeShowGridLines},model:{value:e.showGridLines,callback:function(o){e.showGridLines=o},expression:"showGridLines"}},[1==e.showGridLines?[t("i",{staticClass:"fas fa-border-all"})]:[t("i",{staticClass:"fas fa-border-none"})],e._v(" grid lines ")],2)],1)],1),t("li",[t("v-swatches",{attrs:{"row-length":"5"},on:{input:e.chooseColor},model:{value:e.colorToUse,callback:function(o){e.colorToUse=o},expression:"colorToUse"}},[t("b-button",{staticClass:"control-button",attrs:{slot:"trigger",variant:"light"},slot:"trigger"},[t("i",{staticClass:"fas fa-palette"}),t("span",{staticClass:"color-preview",style:"background:"+e.colorToUse})])],1)],1),t("li",[t("b-form-radio-group",{staticClass:"control-button drawmode",attrs:{buttons:""},on:{change:e.chooseDrawMode},model:{value:e.drawMode,callback:function(o){e.drawMode=o},expression:"drawMode"}},[e._l(e.drawModes,(function(e){return[t("b-form-radio",{key:e.index,attrs:{value:e.value}},[t("i",{class:"fas "+e.icon})])]}))],2)],1),t("li",[t("b-button",{staticClass:"control-button"},[t("i",{staticClass:"fas fa-undo",on:{click:e.undo}})])],1),t("li",{staticClass:"right"},[t("b-dropdown",{staticClass:"control-button",attrs:{variant:"light"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("i",{staticClass:"fas fa-file-download"}),e._v(" Download ")]},proxy:!0}])},[t("b-dropdown-item",{on:{click:function(o){return e.downloadImage("png")}}},[e._v("PNG")]),t("b-dropdown-item",{on:{click:function(o){return e.downloadImage("jpg")}}},[e._v("JPG")]),t("b-dropdown-item",{on:{click:function(o){return e.downloadImage("gif")}}},[e._v("GIF")])],1)],1)])])},c=[],s=new n["default"],l=s,d=t("7f75"),u=t.n(d),f=(t("b3a4"),{name:"Controls",components:{VSwatches:u.a},mounted:function(){var e=this;l.$on("setConfigDefaults",(function(o){e.gridSize=o.gridSize,e.colorToUse=o.colorToUse,e.drawMode=o.drawMode,e.showGridLines=o.showGridLines,e.gridItemSize=o.gridItemSize}))},data:function(){return{gridSize:null,colorToUse:null,drawMode:null,showGridLines:null,gridItemSize:null,drawModes:[{value:"floodfill",text:"Floodfill",icon:"fa-fill-drip"},{value:"simple",text:"Pencil",icon:"fa-pencil-alt"},{value:"line",text:"Line",icon:"fa-pencil-ruler"},{value:"erase",text:"Eraser",icon:"fa-eraser"},{value:"flooderase",text:"FloodEraser",icon:"fa-times"}],gridSizes:[{name:"8x8",value:8},{name:"12x12",value:12},{name:"16x16",value:16},{name:"32x32",value:32}]}},methods:{undo:function(){l.$emit("undo")},changeGridItemSize:function(e){l.$emit("changeGridItemSize",parseInt(e))},changeShowGridLines:function(e){l.$emit("changeShowGridLines",e+""==="1")},chooseColor:function(e){l.$emit("changeColor",e),this.colorToUse=e},chooseDrawMode:function(e){l.$emit("changeDrawMode",e)},chooseGridSize:function(e){this.gridSize=e,l.$emit("changeGridSize",e)},downloadImage:function(e){l.$emit("downloadImage",e)}}}),g=f,m=(t("acec"),t("7b2a"),t("2877")),b=Object(m["a"])(g,a,c,!1,null,"232d1bc3",null),h=b.exports,p=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("canvas",{ref:"canvas",attrs:{width:"0",height:"0"},on:{mousedown:function(o){return e.initDraw(o)}}})},w=[],v=(t("cb29"),t("aeb1")),S=t.n(v),G={},z={},I=null,k=8,x=8,C=8,y="#ffffff00",M="#666",_=!0,L=[],$=function(){var e=0,o=0;G={};for(var t=0;t<k*x;t++)e>=k&&(e=0,o++),G[e+":"+o]={index:t,bgcolor:y,bordercolor:M,coordX:e,coordY:o},e++;L.push(D())},T=function(){var e=I.getContext("2d");for(var o in e.clearRect(0,0,I.width,I.height),G){var t=G[o],n=t.coordX*C,r=t.coordY*C;t.posX=n,t.posY=r;var i=0;_&&(i=.5),e.beginPath(),e.moveTo(n+i,r+i),e.lineTo(n+C+i,r+i),e.lineTo(n+C+i,r+C+i),e.lineTo(n+i,r+C+i),e.lineTo(n+i,r+i),e.closePath(),e.strokeStyle=t.bordercolor,e.fillStyle=t.bgcolor,e.fill(),_&&e.stroke()}};function P(e,o,t){if(t.bgcolor!==e){t.bgcolor===o&&(t.bgcolor=e);for(var n=t.coordX,r=t.coordY,i=[[n-1+":"+r],[n-1+":"+(r-1)],[n+":"+(r-1)],[n+1+":"+(r-1)],[n+1+":"+r],[n+1+":"+(r+1)],[n+":"+(r+1)],[n-1+":"+(r+1)]],a=0;a<i.length;a++){var c=G[i[a]];c&&c.bgcolor===o&&P(e,o,c)}}}function O(e,o,t){for(var n in z)G[n].bgcolor=z[n].bgcolor;var r=o.coordX,i=o.coordY,a=t.coordX,c=t.coordY,s=Math.abs(a-r),l=r<a?1:-1,d=-1*Math.abs(c-i),u=i<c?1:-1,f=s+d,g=!0;while(g){if(G[r+":"+i].bgcolor=e,r==a&&i==c)break;var m=2*f;m>=d&&(f+=d,r+=l),m<=s&&(f+=s,i+=u)}}var D=function(){return JSON.parse(JSON.stringify(G))},U=function(e,o){for(var t in G){var n=G[t];if(n.posX<e+1&&n.posX+C>e-1&&n.posY<o+1&&n.posY+C>o-1)return n}return null},j=function(e){var o=I.getBoundingClientRect(),t=o.left,n=o.top;return U(e.clientX-t,e.clientY-n)},E=function(e,o){S()(I.toDataURL("image/"+o),e+"."+o,"image/"+o)},X=function(e){_=e,T()},Y=function(e){C=e,N(k),T()},F=function(e,o,t){var n=!0,r=t.current;switch(e){case"simple":r.bgcolor===o?n=!1:r.bgcolor=o;break;case"erase":r.bgcolor="#ffffff00";break;case"floodfill":P(o,r.bgcolor,r);break;case"flooderase":P("#ffffff00",r.bgcolor,r);break;case"line":O(o,t.start,r);break;default:console.warn("unbekannter drawmode "+e)}n&&T()},J=function(){z=D()},N=function(e){k=e,x=e,I.width=k*C+1,I.height=x*C+1,$(),T()},R=function(){var e=L.pop();e&&(G=e,T())},A=function(){L.push(D())},B=function(e){I=e},H={init:B,setGridSize:N,cacheGridMap:J,getGridItemFromPosition:U,getGridItemFromEvent:j,applyDrawMode:F,downloadImage:E,showGridLines:X,changeGridItemSize:Y,undo:R,updateHistory:A},V={name:"DrawingPad",created:function(){this.drawStartGridItem=null},mounted:function(){var e=this;H.init(e.$refs.canvas),H.setGridSize(e.gridSize),l.$emit("setConfigDefaults",{gridSize:e.gridSize,colorToUse:e.colorToUse,drawMode:e.drawMode,showGridLines:e.showGridLines,gridItemSize:e.gridItemSize}),l.$on("changeColor",(function(o){e.colorToUse=o})),l.$on("changeDrawMode",(function(o){e.drawMode=o})),l.$on("changeGridSize",(function(o){e.gridSize=o,H.setGridSize(o)})),l.$on("downloadImage",(function(e){H.downloadImage("kaku_img",e)})),l.$on("changeShowGridLines",(function(e){H.showGridLines(!!e)})),l.$on("changeGridItemSize",(function(e){H.changeGridItemSize(e)})),l.$on("undo",(function(){H.undo()}))},data:function(){return{colorToUse:"#27AF60",drawMode:"line",gridSize:32,showGridLines:1,gridItemSize:8}},methods:{draw:function(e){var o=this,t=H.getGridItemFromEvent(e);t&&H.applyDrawMode(o.drawMode,o.colorToUse,{current:t,start:o.drawStartGridItem})},initDraw:function(e){var o=this;H.cacheGridMap(),H.updateHistory(),o.drawStartGridItem=H.getGridItemFromEvent(e);var t=function e(t){window.removeEventListener("mouseup",e),window.removeEventListener("mousemove",n),o.draw(t),o.drawStartGridItem=null},n=function(e){o.draw(e)};window.addEventListener("mouseup",t),window.addEventListener("mousemove",n)}}},q=V,K=(t("89e4"),Object(m["a"])(q,p,w,!1,null,"23057b79",null)),Q=K.exports,W=(t("b0c0"),t("337f")),Z=t.n(W),ee=Z.a.getParser(window.navigator.userAgent),oe={browserIsCompatible:function(){var e=!0,o=ee.getBrowser();return"Internet Explorer"===o.name&&"11.0"!==o.version&&(e=!1),e}},te={name:"kaku",components:{Controls:h,DrawingPad:Q},mounted:function(){var e=this;oe.browserIsCompatible()||e.$refs["browser-comp"].show()}},ne=te,re=(t("034f"),Object(m["a"])(ne,r,i,!1,null,null,null)),ie=re.exports,ae=t("5f5b");t("ab8b"),t("2dd8"),t("becf");n["default"].use(ae["a"]),new n["default"]({render:function(e){return e(ie)}}).$mount("#app")},"7b2a":function(e,o,t){"use strict";t("dcc4")},"85ec":function(e,o,t){},"89e4":function(e,o,t){"use strict";t("acc8")},a915:function(e,o,t){},acc8:function(e,o,t){},acec:function(e,o,t){"use strict";t("a915")},dcc4:function(e,o,t){}});
//# sourceMappingURL=app.130254f8.js.map