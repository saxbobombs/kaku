(function(e){function o(o){for(var r,i,c=o[0],l=o[1],s=o[2],u=0,f=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(o);while(f.length)f.shift()();return a.push.apply(a,s||[]),t()}function t(){for(var e,o=0;o<a.length;o++){for(var t=a[o],r=!0,c=1;c<t.length;c++){var l=t[c];0!==n[l]&&(r=!1)}r&&(a.splice(o--,1),e=i(i.s=t[0]))}return e}var r={},n={app:0},a=[];function i(o){if(r[o])return r[o].exports;var t=r[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=r,i.d=function(e,o,t){i.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,o){if(1&o&&(e=i(e)),8&o)return e;if(4&o&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)i.d(t,r,function(o){return e[o]}.bind(null,r));return t},i.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(o,"a",o),o},i.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=o,c=c.slice();for(var s=0;s<c.length;s++)o(c[s]);var d=l;a.push([0,"chunk-vendors"]),t()})({0:function(e,o,t){e.exports=t("56d7")},"00e0":function(e,o){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAADgSURBVFhHYzQ2Nv7PMMAA7Ig3nZlQLiYQKZ/O8DI3CMrDBOKT1zH8nmkL5WEC1vTDDF9qdKE8TMDTcpmBCcoeUDDqCBgYdQQMDApHDJ5y4ptvG5SLCbg2VzEUGvRAeZig/0IJQ7RAFZSHCZZ+aGPgUrKG8jDBt3tHR9MEHIw6AgZGHQEDg6ec2D/pHpSLCRzzlBgOZD6D8jCBw3Qphq0SnFAeJvB+8Z2hl/UHlIcJin9zjKYJOBh1BAyMOgIGBk85sXv3bigXE7i6ujLQWn40TcDAqCNgYNQRMDAIygkGBgDfwD6SVoJKswAAAABJRU5ErkJggg=="},"034f":function(e,o,t){"use strict";t("85ec")},"55be":function(e,o,t){},"56d7":function(e,o,t){"use strict";t.r(o);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("2b0e"),n=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"header"}},[r("b-container",[r("h1",[r("img",{attrs:{src:t("00e0"),alt:""}}),e._v(" PixelArt")]),r("p",[e._v("draw something")])])],1),r("b-container",[r("b-toast",{ref:"browser-comp",staticClass:"browser-comp",attrs:{static:"",title:"browser compatibility","no-auto-hide":""}},[e._v(" please use a modern browser to avoid unexpected behavior. ")]),r("div",{staticClass:"control-container"},[r("PixelArtControls")],1),r("div",{staticClass:"canvas-container"},[r("PixelArtCanvas")],1)],1)],1)},a=[],i=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("ul",{staticClass:"control-container"},[t("li",[t("b-form-radio-group",{staticClass:"control-button grid-size-container",attrs:{buttons:""},on:{change:e.chooseGridSize},model:{value:e.gridSize,callback:function(o){e.gridSize=o},expression:"gridSize"}},[t("i",{staticClass:"group-label fas fa-th"}),e._l(e.gridSizes,(function(o){return[t("b-form-radio",{key:o.index,attrs:{value:o.value}},[e._v(" "+e._s(o.name)+" ")])]}))],2)],1),t("li",[t("v-swatches",{attrs:{"row-length":"5"},on:{input:e.chooseColor},model:{value:e.colorToUse,callback:function(o){e.colorToUse=o},expression:"colorToUse"}},[t("b-button",{staticClass:"control-button",attrs:{slot:"trigger",variant:"light"},slot:"trigger"},[t("i",{staticClass:"fas fa-palette"}),t("span",{staticClass:"color-preview",style:"background:"+e.colorToUse})])],1)],1),t("li",[t("b-form-radio-group",{staticClass:"control-button drawmode",attrs:{buttons:""},on:{change:e.chooseDrawMode},model:{value:e.drawMode,callback:function(o){e.drawMode=o},expression:"drawMode"}},[e._l(e.drawModes,(function(e){return[t("b-form-radio",{key:e.index,attrs:{value:e.value}},[t("i",{class:"fas "+e.icon})])]}))],2)],1),t("li",{staticClass:"right"},[t("b-dropdown",{staticClass:"control-button",attrs:{variant:"light"},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("i",{staticClass:"fas fa-file-download"}),e._v(" Download ")]},proxy:!0}])},[t("b-dropdown-item",{on:{click:function(o){return e.downloadImage("png")}}},[e._v("PNG")]),t("b-dropdown-item",{on:{click:function(o){return e.downloadImage("jpg")}}},[e._v("JPG")]),t("b-dropdown-item",{on:{click:function(o){return e.downloadImage("gif")}}},[e._v("GIF")])],1)],1)])])},c=[],l=new r["default"],s=l,d=t("7f75"),u=t.n(d),f=(t("b3a4"),{name:"PixelArtControls",components:{VSwatches:u.a},mounted:function(){var e=this;s.$on("setConfigDefaults",(function(o){e.gridSize=o.gridSize,e.colorToUse=o.colorToUse,e.drawMode=o.drawMode}))},data:function(){return{gridSize:null,colorToUse:null,drawMode:null,drawModes:[{value:"floodfill",text:"Floodfill",icon:"fa-fill-drip"},{value:"simple",text:"Pencil",icon:"fa-pencil-alt"},{value:"line",text:"Line",icon:"fa-pencil-ruler"},{value:"erase",text:"Eraser",icon:"fa-eraser"}],gridSizes:[{name:"8x8",value:8},{name:"12x12",value:12},{name:"16x16",value:16},{name:"32x32",value:32}]}},methods:{chooseColor:function(e){s.$emit("changeColor",e),this.colorToUse=e},chooseDrawMode:function(e){s.$emit("changeDrawMode",e)},chooseGridSize:function(e){this.gridSize=e,s.$emit("changeGridSize",e)},downloadImage:function(e){s.$emit("downloadImage",e)}}}),g=f,v=(t("a2f9"),t("b0d0"),t("2877")),p=Object(v["a"])(g,i,c,!1,null,"6d7ff4a2",null),b=p.exports,w=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("canvas",{ref:"canvas",attrs:{width:"0",height:"0"},on:{mousedown:function(o){return e.initDraw(o)}}})},m=[],h=(t("cb29"),t("aeb1")),A=t.n(h),S={},C={},x=null,M=8,D=8,y=8,z="#eeeeee00",G="#666",I=function(){var e=0,o=0;S={};for(var t=0;t<M*D;t++)e>=M&&(e=0,o++),S[e+":"+o]={index:t,bgcolor:z,bordercolor:G,coordX:e,coordY:o},e++},k=function(){var e=x.getContext("2d");for(var o in e.clearRect(0,0,x.width,x.height),S){var t=S[o],r=t.coordX*y,n=t.coordY*y;t.posX=r,t.posY=n;var a=.5;e.beginPath(),e.moveTo(r+a,n+a),e.lineTo(r+y+a,n+a),e.lineTo(r+y+a,n+y+a),e.lineTo(r+a,n+y+a),e.lineTo(r+a,n+a),e.closePath(),e.strokeStyle=t.bordercolor,e.fillStyle=t.bgcolor,e.fill(),e.stroke()}};function T(e,o,t){if(t.bgcolor!==e){t.bgcolor===o&&(t.bgcolor=e);for(var r=t.coordX,n=t.coordY,a=[[r-1+":"+n],[r-1+":"+(n-1)],[r+":"+(n-1)],[r+1+":"+(n-1)],[r+1+":"+n],[r+1+":"+(n+1)],[r+":"+(n+1)],[r-1+":"+(n+1)]],i=0;i<a.length;i++){var c=S[a[i]];c&&c.bgcolor===o&&T(e,o,c)}}}function U(e,o,t){for(var r in C)S[r].bgcolor=C[r].bgcolor;var n=o.coordX,a=o.coordY,i=t.coordX,c=t.coordY,l=Math.abs(i-n),s=n<i?1:-1,d=-1*Math.abs(c-a),u=a<c?1:-1,f=l+d,g=!0;while(g){if(S[n+":"+a].bgcolor=e,n==i&&a==c)break;var v=2*f;v>=d&&(f+=d,n+=s),v<=l&&(f+=l,a+=u)}}var _=function(e,o){for(var t in S){var r=S[t];if(r.posX<e+1&&r.posX+y>e-1&&r.posY<o+1&&r.posY+y>o-1)return r}return null},P=function(e){var o=x.getBoundingClientRect(),t=o.left,r=o.top;return _(e.clientX-t,e.clientY-r)},E=function(e,o){A()(x.toDataURL("image/"+o),e+"."+o,"image/"+o)},O=function(e,o,t){var r=!0,n=t.current;switch(e){case"simple":n.bgcolor===o?r=!1:n.bgcolor=o;break;case"erase":n.bgcolor="#ffffff00";break;case"floodfill":T(o,n.bgcolor,n);break;case"line":U(o,t.start,n);break;default:console.warn("unbekannter drawmode "+e)}r&&k()},j=function(){C=JSON.parse(JSON.stringify(S))},B=function(e){M=e,D=e,x.width=M*y+1,x.height=D*y+1,I(),k()},Y=function(e){x=e},$={init:Y,setGridSize:B,cacheGridMap:j,getGridItemFromPosition:_,getGridItemFromEvent:P,applyDrawMode:O,downloadImage:E},J={name:"PixelArtCanvas",created:function(){this.drawStartGridItem=null},mounted:function(){var e=this;$.init(e.$refs.canvas),$.setGridSize(e.gridSize),s.$emit("setConfigDefaults",{gridSize:e.gridSize,colorToUse:e.colorToUse,drawMode:e.drawMode}),s.$on("changeColor",(function(o){e.colorToUse=o})),s.$on("changeDrawMode",(function(o){e.drawMode=o})),s.$on("changeGridSize",(function(o){e.gridSize=o,$.setGridSize(o)})),s.$on("downloadImage",(function(e){$.downloadImage("pixelart_img",e)}))},data:function(){return{colorToUse:"#27AF60",drawMode:"line",gridSize:32}},methods:{draw:function(e){var o=this,t=$.getGridItemFromEvent(e);t&&$.applyDrawMode(o.drawMode,o.colorToUse,{current:t,start:o.drawStartGridItem})},initDraw:function(e){var o=this;$.cacheGridMap(),o.drawStartGridItem=$.getGridItemFromEvent(e);var t=function e(t){window.removeEventListener("mouseup",e),window.removeEventListener("mousemove",r),o.draw(t),o.drawStartGridItem=null},r=function(e){o.draw(e)};window.addEventListener("mouseup",t),window.addEventListener("mousemove",r)}}},Q=J,R=Object(v["a"])(Q,w,m,!1,null,"a507b7f2",null),X=R.exports,F=(t("b0c0"),t("337f")),L=t.n(F),Z=L.a.getParser(window.navigator.userAgent),H={browserIsCompatible:function(){var e=!0,o=Z.getBrowser();return"Internet Explorer"===o.name&&"11.0"!==o.version&&(e=!1),e}},N={name:"PixelArt",components:{PixelArtControls:b,PixelArtCanvas:X},mounted:function(){var e=this;H.browserIsCompatible()||e.$refs["browser-comp"].show()}},K=N,V=(t("034f"),Object(v["a"])(K,n,a,!1,null,null,null)),q=V.exports,W=t("5f5b");t("ab8b"),t("2dd8"),t("becf");r["default"].use(W["a"]),new r["default"]({render:function(e){return e(q)}}).$mount("#app")},"85ec":function(e,o,t){},a2f9:function(e,o,t){"use strict";t("55be")},b0d0:function(e,o,t){"use strict";t("ee94")},ee94:function(e,o,t){}});
//# sourceMappingURL=app.6d86441c.js.map